apiVersion: v1
kind: ConfigMap
metadata:
  name: gokapi-config
  namespace: file-sharing
data:
  configuration.json: |
    {
      "Authentication": {
        "Username": "admin",
        "Password": "$2a$12$YourHashedPasswordHere",
        "SaltAdmin": "AdminSaltChangeMe123!",
        "SaltFiles": "FilesSaltChangeMe456!"
      },
      "Server": {
        "Port": "53842",
        "PublicUrl": "http://localhost:30042",
        "BindAddress": "0.0.0.0",
        "Ssl": {
          "Enabled": false,
          "Redirect": false
        }
      },
      "Database": {
        "Type": "mongodb",
        "Connection": "mongodb://mongodb-service.file-sharing.svc.cluster.local:27017/gokapi",
        "Database": "gokapi"
      },
      "AWS": {
        "Enabled": false,
        "Bucket": "",
        "Region": "",
        "Endpoint": "",
        "Key": "",
        "KeySecret": "",
        "ExpirationDays": 365
      },
      "DefaultSettings": {
        "Downloads": 1,
        "ExpiryDays": 7,
        "Password": "",
        "UnlimitedDownloads": false,
        "UnlimitedTime": false
      },
      "Limits": {
        "FileSizeMB": 100,
        "TotalSizeMB": 1000,
        "FilesTotal": 100
      },
      "Security": {
        "AllowUnauthenticatedDownloads": false,
        "EnableCors": false
      }
    }
  
  generate-password.sh: |
    #!/bin/bash
    echo "Для генерации пароля запустите в контейнере Gokapi:"
    echo "docker exec -it <container_id> /opt/Gokapi/gokapi --password"
    echo ""
    echo "Или сгенерируйте hash командой:"
    echo "htpasswd -bnBC 12 '' 'your_password' | tr -d ':\n'"